### linux 目录表

/ 根目录

/bin 、 /usr/bin 可执行二进制文件目录，如常用的命令ls cat等

/boot 放置系统启动时用到的一些文件，如内核文件

/dev 存放系统下的设备文件，访问该目录下的文件，相当于访问某个设备，常用的是挂载光驱`mount /dev/cdrom/mnt`  

/etc 系统配置文件，重要的配置文件有



### 文件大小表示方式

| 单位 | 英文          |
| ---- | ------------- |
| 字节 | B (Byte)      |
| 千   | K (KibiByte)  |
| 兆   | M (MebiByte)  |
| 千兆 | G (GigaByte)  |
| 太   | T (TeraByte)  |
| 拍   | P (PetaByte)  |
| 艾   | E (ExaByte)   |
| 泽   | Z (ZettaByte) |
| 尧   | Y (YottaByte) |



### linux 常用命令

| 命令          |                      | 作用                                                         |
| ------------- | -------------------- | ------------------------------------------------------------ |
| ls            | list                 | 查看当前文件夹下的内容                                       |
| pwd           | print work directory | 查看当前所在文件夹                                           |
| cd[目录名]    | change directory     | 切换文件夹                                                   |
| touch[文件名] | touch                | 如果文件不存在，新建文件<br />如果文件已经存在，修改文件的末次修改日期 |
| mkdir[目录名] | make directory       | 创建目录                                                     |
| rm[文件名]    | remove               | 删除指定的文件名                                             |
| clear         |                      | 清屏                                                         |



**ls 常用选项**

* `-a` 显示所有目录和文件，包括隐藏文件

  ```shell
  $ ls -a
  . .. .xxx.txt
  # 以.开头的文件/文件夹为隐藏文件/文件夹
  # . 代表当前目录
  # .. 代表上一级目录
  # 蓝色为目录，白色为文件
  ```


* `-l` 以列表方式显示文件的详细信息
* `-h` 配合-l 以人性化的方式显示文件大小

选项可以合写，无顺序

```shell
$ ls -alh
```

ls **通配符**

* `*` 代表任意个数个字符
* `？`代表任意一个字符
* `[]` 表示可以匹配字符组中的任意一个
* `[abc]` 匹配`a`、`b`、`c` 中的任意一个
* `[a-f]` 匹配 `a-f` 任意一个字符



**cd 常用选项**

* `cd `/`cd ~ ` 切换到当前用户的主目录

* `cd ..` 切换到上一级目录

* `cd -`  在最近两次工作目录间切换



**mkdir**

* `-p` 可以递归创建目录

```shell
$ madir -p a/b/c
```

> 同一目录下文件夹名称不能和文件名同名



**rm**

> 删除时直接删除，不放入回收站

* `-f ` 强制删除，忽略不存在的文件，无需提示

* `-r ` 递归的删除目录下的内容，或用于删除文件夹



### 终端命令格式

```bash
$ command [-options][paramete]
```

command : 命令名，相应功能的英文单词或单词缩写
-options： 选项
paramete ：参数



### 查阅帮助信息

```bash
$ command --help
$ man command
# man 是manual缩写,手册
# 使用man 时的操作键
#	空格 显示手册的下一屏
#	enter 一次滚动手册页的一行
#	b 回滚一屏
#	f 前滚一屏
#	q 退出
#	/word 搜索word字符串
```



### 终端技巧

* 自动补全

  在敲出 文件/目录/命令的前几个字母后，按下 `tab` 键

  * 如果输入没有歧义，系统会自动补全
  * 如果输入有歧义，再按一下 `tab` 键，系统会提示可能存在的命令

* 曾经使用过的命令

  按上下键可在曾经使用过的命令间切换，`Ctrl+c ` 退出选择


### 文件和目录常用命令

#### 拷贝和移动文件

* `tree [目录名]`：  以树状图列出文件目录结构

	`-d`  只显示目录，不显示文件

* `cp 源文件 目标文件`： copy 复制文件或者目录

```shell
$ cp  ~/Documemt/readme.txt  ./readme.txt
# 将 ~/Documemt/ 目录下的 readme.txt 文件复制到./目录下并以readme.txt命名
# 如果不修改文件名，只需要写目标路径
$ cp  ~/Documemt/readme.txt  ./
```

	`-i` ：覆盖文件前提示 y 覆盖 n 不覆盖
	
	`-r` ：若给出的源文件是目录文件，将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名



* `mv 源文件 目标文件`：move 移动文件或目录/ 文件或目录重命名

```shell
$ mv  ~/Documemt/readme.txt  ./
# 将 ~/Documemt/ 目录下的 readme.txt 文件移动到./目录下
$ mv readme.txt demo.txt
# 将readme.txt文件名修改为demo.txt
```

	`-i` ：覆盖文件前提示 y 覆盖 n 不覆盖



#### 查看文件内容

* `cat` 文件名： `concatenate` 查看文件内容、创建文件、文件合并、追加文件内容等功能，会**一次显示所有内容**，适合内容较少的文本文件

  `-b`：对非空输出行编号

  `-n`：对输出的所有行编号

  > linux 中还有一个 `nl`  命令和 `cat -b` 的效果等价

* `more` 文件名：**分屏显示文件内容** ，按空格显示下一屏，适合查看内容较多的文本

```shell
# 使用 more 时的操作键  和 man 相同
# 空格 显示手册的下一屏
# enter 一次滚动手册页的一行
# b 回滚一屏
# f 前滚一屏
# q 退出
# /word 搜索word字符串
```



* `grep` 搜索文本 文件名： 搜索文本文件内容，输出包含该文本的行

  > linux 中的文本搜索工具，允许对文本文件进行模式查找（正则表达式），如果搜索文本中间有空格可以使用引号包裹

  `-n` 显示匹配行和行号

  `-v` 显示不包含匹配文本的所有行（相当于求反）

  `-i` 忽略大小写

  `^a` 行首，搜索以a开头的行

  `ke$` 行尾，搜索以ke结束的行



#### 其他

* `echo 文字内容` ：会在终端中显示参数指定的文本，通常会和重定向联合使用

* 重定向  `>` 和 `>>`：

> linux 允许将命令执行结果重定向到一个文件，将本应显示在终端上的内容输出/追加到指定文件中，保存命令输出结果

`>` 表示输出，会覆盖文件原有的内容

`>>` 表示追加，会将文件追加到已有文件的末尾

```shell
# 创建 a 文件并将 “hello world”输出到 a 文件中 ，与touch区别
$ echo hello world > a
# 将命令 “ls -lh” 的结果输出到 a 文件中
$ ls -lh > a
```



* 管道 `|`

> linux 允许将一个命令的输出通过管道作为另一个命令的输入，另一个命令对第一个命令的输出进行二次处理
>
> 可以理解为现实生活中的管子，管子的一头塞东西进去，另一头取出来，这里 `|` 的左右分为两端，左端塞东西（写），右端取东西（读）

```shell
# more：分屏显示内容
# 分屏显示命令 “ls -lha” 的输出结果
$ ls -lha ~ | more

# grep：在命令执行结果的基础上查询指定文本
# 查找 “ls -lha ~” 的结果中包含Do的行并显示
$ ls -lha ~ | grep Do
```



### 远程管理命令

#### 关机/重启

`shutdown 选项 时间`

	`-r`  重新启动

> 不指定选项和参数，默认表示一分钟之后关闭电脑
>
> 远程维护服务器时，最好不要关闭系统，而应该重新启动系统

```shell
# 常用命令示例
# 重新启动电脑，now 表示现在
$ shutdown -r now

# 系统在今天20:00 关机
$ shutdown 20:00

# 系统十分钟后自动关机
$ shutdown +10

# 取消关机计划
$ shutdown -c
```



#### 查看或配置网卡信息

`ifconfig`:  `configure a network interface` 查看/配置计算机当前的网卡配置信息

```shell
# 查看网卡配置信息
$ ifconfig

# 查看网卡对应的IP地址
$ ifconfig | grep inet
```

>  在linux中物理网卡通常以 `ensxx` 表示
>
> 127.0.0.1 本地环回/环回地址，一般用来测试本纪网卡是否正常



`ping ip地址`： `ping` 检测到目标 ip 地址连接是否正常

 	ping 127.0.0.1 检查本地网卡是否工作正常



#### 远程登录和复制文件

* `ssh 用户名@ip` ：`secure shell` 关机/重新启动

* `scp 用户名@ip:文件名或路径 用户名@ip:文件名或路径`：`secure copy`  远程复制文件

**SSH** ：SSH 客户端是一种使用Secure Shell (SSH) 协议连接到远程计算机的软件协议

* 数据传输是加密的，可以防止远程管理过程中的信息泄露，也能防止DNS欺骗和IP欺骗

* 数据传输是压缩的，可以提高传输速度

>  有关 ssh 配置信息都保存在用户家目录下的 `.ssh`目录下

##### 域名和端口号

`域名`：由一串用点分割的名字组成，例如 `www.baidu.com` ，是IP地址的别名，方便记忆

`端口号`：通过IP地址可以找到网络上的计算机，通过端口号可以找到计算机上运行的程序

> SSH服务器默认端口号为22，Web服务器为80，HTTPS为443，FTP服务器为21，如果没有指定端口号，使用默认端口号



##### SSH 基本使用

```shell
$ ssh [-p port] user@remote
# user 远程服务器上的用户名，如果不指定默认当前用户
# remote 远程机器的地址，可以是IP/域名，或者别名
# port 是SSH server 监听的端口，如果不指定，默认22

# 使用 exit 退出当前用户登录
# ssh 在 linux 或 Unix 系统下可直接使用，win下需要安装软件 putty xshell
```

##### scp 基本使用

```shell
# 从远程服务器拷贝文件
$ scp user@remote ip:文件名或路径 文件名或路径
# -r 复制目录
# -P 指定端口是要用大写的 P

# 上传文件到服务器
$ scp 文件名或路径 user@remote ip:文件名或路径 
```

> `scp`  命令只能在 `Linux` 或 `Unix` 下使用

在win系统中需安装filezilla 使用FTP进行文件传输

FileZilla 传输文件时，使用的是 `FTP` 服务而不是 `SSH` 服务，因此端口号应该为 `21`



##### ssh高级

* 免密码登陆

配置公钥：执行 `ssh-keygen` 即可生成 ssh 钥匙，一路回车即可

​	`id_rsa.pub ` 公钥 、 `id_rsa` 私钥

上传公钥到服务器：执行 `ssh-copy-id -p port user@remote`，公钥保存在服务器 `.ssh` 目录下

​	`authorized_keys`

>  本地使用私钥对数据进行加密/解密，服务器使用公钥对数据进行加密/解密
>
> 非对称加密算法
>
> 使用公钥加密的数据，需要使用私钥解密
>
> 使用公私钥加密的数据，需要使用公钥解密

* 配置别名

`~/.ssh/config`

```
Host vultr
	HostName ip地址
	User root
	port 22
```

直接使用 `ssh vultr` 即可实现登陆，`scp` 同样适用



### 用户和权限的相关命令

#### 用户和权限的基本概念

* 用户管理包括 **用户** 和 **组** 管理

* 在linux中可以指定每一个用户针对不同的文件或目录不同的权限

* 对**文件/目录的权限**包括

| 权限 | 英文   | 缩写 | 数字代号 |
| ---- | ------ | ---- | -------- |
| 读   | red    | r    | 4        |
| 写   | write  | w    | 2        |
| 执行 | excute | x    | 1        |

**组**：实际工作中，可以预先对组设置好权限，然后将不同的用户添加到不同的组中（简化了用户权限设置）

```
ls -l
-         rw-        1       rw-              r--        用户名   组名 大小 时间 名称
d         rwx        2       rwx              r-x
文件/目录  当前用户权限 硬链接数  当前组所对应的权限  其他用户权限 
```

|      |      |      |      |      |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
|      |      |      |      |      |      |      |      |      |      |
|      |      |      |      |      |      |      |      |      |      |
|      |      |      |      |      |      |      |      |      |      |





硬链接数：表示有多少种方式可以访问到当前目录/文件



用户管理终端命令

组管理终端命令

修改权限终端命令



